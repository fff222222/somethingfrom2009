你的代码我暂时看不懂,但是你的方法我认为是 "目前我们能找到的最佳方法".
现在有这么几个技术细节你考虑一下,当然你觉得没有必要Demo是必要的.思路走得通即可.
1 怎么实现那种可以调整的圆 椭圆 多边形 正方形 长方形线段,圆弧,巴塞尔曲线(就是四边有几个控制点,调整可以改变大小,上次你做了一个长方形的)?
图形可以缩放,线段用点来调节
2 怎么实现放大 缩小? 通过修改canvas的scale显然是不太好的?
用户放大的时候改变图元位置和大小属性
3 怎么实现Edit操作(拷贝,粘贴,截切 redo,undo)?
4 怎么实现引脚的自动吸附? 
5 怎么绘制电线?(就是那种橡皮筋形似的线,从一个引脚到另外一个引脚) 导线它是需要做网格捕获(导线它是需要在网格的边框上走,也就是说电线一般是直线,很少是斜线.
6 怎么绘制自定义 芯片lib? 就是那种电阻 它是由引脚 与其它基本图元组成.最后封装成一个整体放置在电路图纸中.
    以上你可以仔细体验一下protel.(以上你先思考,然后在下面的参考资料中找到答案)
  1 SVG-edit (http://code.google.com/p/svg-edit/) (演示 http://svg-edit.googlecode.com/svn/trunk/editor/svg-editor.html )(代码下载 http://code.google.com/p/svg-edit/downloads/list)
    它的Js代码风格与设计模式很值得学习.
  2 ※C++版的TinyCAD (包括了我们首先要实现的电路图绘制的所有功能,它的算法与设计思路值得参考. 跟我们唯一的区别就是C++用异或来动态绘制,我们用双缓存+局部刷新来处理)
     http://sourceforge.net/projects/tinycad/ 应用程序下载
     http://sourceforge.net/scm/?type=svn&group_id=47763 源代码下载
     C++版需要用VS2010编译 参考 http://shenzhoulong.blog.51cto.com/blog/1191789/315139
  我周六或者周日来杭州,其它事情我们见面谈.你现在要考虑的是怎么实现,大概要多久实现.
  
  
   
 